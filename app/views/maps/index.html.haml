%script{src: "//maps.google.com/maps/api/js?v=3.22&libraries=geometry&language=&hl=&region="}
%script{src: "//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"}
%script{src: "//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js"}

= render "page_title", title_text: "Farms Near Me"

.farmsContainer
  %aside
    #farmList
      - @nearby_farms.each do |farm|
        .farmListItem{id: "farm_#{farm.id}", class: "card"}
          .card-content
            .card-title{class: "farmName teal-text"} #{farm.name}
            .field
              Address: #{farm.full_address.gsub(",", " ")}
            .field
              Distance(miles): #{farm.distance}
          .card-action
            %a{class: "viewItemsButton waves-effect waves-light btn", href: farms_items_path(id: "#{farm.id}"), "data-no-turbolink": true} View Items
  %section
    .card
      .card-content
        .mapContainer
          #map

:javascript
  initMap();

%h1 My Basket

.basketItemsContainer{"ng-controller": "BasketsCtrl"}
  .item{"ng-repeat": "basket_item in basket_items"}
    .itemName{"ng-bind": "basket_item.item.name"}
    %label Quantity:
    .itemQuantity{"ng-bind": "basket_item.quantity"}
    %label: Price per unit:
    .itemPrice{"ng-bind": "basket_item.item.price"}
    %label Total:
    .itemTotal{"ng-bind": "basket_item.total"}
    %a{class: "removeLink", "ng-click": "removeFromBasket(basket_item.id)"} Remove

  %span Total (ex Vat)
  %label{id: "totalExVat", "ng-bind": "totalExVat"}
  %span VAT(20%)
  %label{id: "vat", "ng-bind": "vat"}
  %span Total (inc Vat)
  %label{id: "totalIncVat", "ng-bind": "totalIncVat"}

= form_tag charges_path do
  %article
    - if flash[:error].present?
      #error_explanation
        %p= flash[:error]
  %script.stripe-button{"data-amount" => "#{@amount}", "data-description" => "Farm Fresh Order", "data-key" => Rails.configuration.stripe[:publishable_key], "data-locale" => "auto", :src => "https://checkout.stripe.com/checkout.js", "data-image" => "https://s3-eu-west-1.amazonaws.com/kpfarmfresh/logo.png", "data-currency" => "gbp", "data-email" => "#{current_restaurant.email}"}


